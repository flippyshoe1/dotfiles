;;; Package management (and custom functions)
(when (>= emacs-major-version 24)
  (progn
    ;; load emacs 24's package system.
    (require 'package)
    ;; Add MELPA repository.
    (add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t))
  (when (< emacs-major-version 27) (package-initialize)))

(defun pm/require-package (package)
  (when (not (package-installed-p package))
    (package-install package)))

(defun pm/require (&rest packages)
  (dolist (package packages)
    (pm/require-package package)))


;;; Basic UI changes
(setq inhibit-startup-message t)     ;; no startup message
(global-display-line-numbers-mode 1) ;; numbers on the side!!
(load-theme 'wombat t)               ;; theme (temporarily)
;; no bloat on my machine!
(menu-bar-mode -1) 
(tool-bar-mode -1)
(scroll-bar-mode -1)
;; default values for when creating "frames" (or tabs or whatever the fuck
(add-to-list 'default-frame-alist
	     '(font . "JetBrainsMono Nerd font-12"))

;;; Handy settings
(recentf-mode 1)    ;; remembers the last files you edited in emacs (use M-x recentf-open-files to use)
(save-place-mode 1) ;; remembers where you've last been in a file after closing it
;; prevents "littering" by making the custom emacs settings go elsewhere :)
(setq custom-file(locate-user-emacs-file "custom-vars.el"))
(load custom-file 'noerror 'nomessage)
(global-auto-revert-mode 1) ;; autoupdate the file if it has been changed

;;; Backup?
(setq make-backup-files t)    ;; creates a backup file
(setq version-control t)      ;; make multiple versions of the backup
(setq backup-by-copying t)    ;; preserve metadata when making backups
(setq vc-make-backup-files t) ;; make backups even in version controlled dirs

;;; Ido (and smex)
(require 'ido) ;; the ido part
(ido-mode t)

(pm/require 'smex) ;; the smex part
(smex-initialize)
